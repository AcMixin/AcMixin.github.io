<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>Linux网络配置</title>
    <link href="/2021/06/20/Linxu%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/"/>
    <url>/2021/06/20/Linxu%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="常用命令1"><a href="#常用命令1" class="headerlink" title="常用命令1"></a>常用命令1</h2><h4 id="检测配置文件是否有错"><a href="#检测配置文件是否有错" class="headerlink" title="检测配置文件是否有错"></a>检测配置文件是否有错</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">testparm <br></code></pre></td></tr></table></figure><h4 id="包管理"><a href="#包管理" class="headerlink" title="包管理"></a>包管理</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">## 搜索有没有安装httpd</span><br>rpm -qa ｜ grep <span class="hljs-string">&quot;httpd&quot;</span><br><br><span class="hljs-comment">## 卸载</span><br>rpm -e <span class="hljs-string">&quot;httpd&quot;</span><br><br></code></pre></td></tr></table></figure><h3 id="搜索和查看软连接"><a href="#搜索和查看软连接" class="headerlink" title="搜索和查看软连接"></a>搜索和查看软连接</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">whereis<br><br><span class="hljs-built_in">ls</span> -alh python<br></code></pre></td></tr></table></figure><h2 id="网卡"><a href="#网卡" class="headerlink" title="网卡"></a>网卡</h2><h3 id="配置信息文件"><a href="#配置信息文件" class="headerlink" title="配置信息文件"></a>配置信息文件</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs visual">vim/etc/sysconfig/network-scripts/ifcfg-eth0<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs visual">命令ifconfig eth0:192.168.0.0<br>个别图形界面setup<br></code></pre></td></tr></table></figure><h3 id="主机名文件"><a href="#主机名文件" class="headerlink" title="主机名文件"></a>主机名文件</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">vim<span class="hljs-regexp">/etc/</span>sysconfig/network<br></code></pre></td></tr></table></figure><p>(默认localhost.localdomain)</p><h3 id="网卡操作"><a href="#网卡操作" class="headerlink" title="网卡操作"></a>网卡操作</h3><p>重启网卡</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs visual">service network restart<br></code></pre></td></tr></table></figure><p>开起关闭网卡：</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs visual">ifup 网卡名<br><br>ifdown 网卡名<br><br>ipconfig 网卡名 up<br><br>ipconfig 网卡名 down<br></code></pre></td></tr></table></figure><p>查询网络状态：</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs visual">netstat 选项<br><br>-t 列出tcp协议端口<br><br>-u 列出UDP协议端口<br><br>-n 不使用域名和服务名而是用IP地址和端口号<br><br>-l 仅列出在监听状态网络服务<br><br>-a 列出所有网络连接<br><br>netstat -rn 列出路由列表<br></code></pre></td></tr></table></figure><h3 id="UUID"><a href="#UUID" class="headerlink" title="UUID"></a>UUID</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs visual">复制镜像需要修改UUID<br>uuidgen<br><br>将生成的uuid复制到网卡配置文件里<br>1）vim /etc/sysconfig/network-scripts/ifcfg-eth0<br><br>\#删除mac地址行<br><br>2）rm -rf /etc/udev/rules.d/70-persistent-net.rules<br><br>\#删除网卡和mac地址绑定文件<br><br>修改主机名称<br><br>第一个地方是/etc/sysconfig/network文件<br><br>第二个文件是/etc/hosts，将文件中的locatlhost.localdomain替换为自己想要的主机名<br><br>第三步是修改/etc/hostname文件中名称<br></code></pre></td></tr></table></figure><h2 id="Linux抓包截获"><a href="#Linux抓包截获" class="headerlink" title="Linux抓包截获"></a>Linux抓包截获</h2><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs visual">tcpdump -i eth0 -nnX port 21<br><br>抓包截获 指定网卡eth0 以ip地址的方式监听 X以16进制拆分分析 指定端口号21<br><br>bin用户sbin管理用户<br></code></pre></td></tr></table></figure><h2 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h2><p><strong>1、命令行界面输入命令“systemctl status firewalld.service”并按下回车键</strong></p><p><strong>2、然后在下方可度以查看得到“active（running）”，此时说明防火墙已经被打开了。</strong></p><p><strong>3、在命令行中输入systemctl stop firewalld.service命令，临时关闭防火墙。</strong> </p><p><strong>4、然后再使用命令systemctl status firewalld.service，在下方出现disavtive（dead），这样就说明防火墙已经关闭。</strong></p><p><strong>5、再在命令行中输入命令“systemctl disable firewalld.service”命令，即可永久关闭防火墙。</strong></p><h3 id="防火墙开放端口"><a href="#防火墙开放端口" class="headerlink" title="防火墙开放端口"></a>防火墙开放端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">firewall-cmd --zone=public --add-port=80/tcp --permanent <br><span class="hljs-comment">#(--permanent 这个参数是永久生效，如果不设置这个参数，默认重启后就失效)</span><br><br><span class="hljs-comment">#重新载入，使设置剩下</span><br><br>firewall-cmd --reload<br><br><span class="hljs-comment">#查看</span><br><br>firewall-cmd --zone=public --query-port=80/tcp<br><br><span class="hljs-comment">#删除</span><br><br>firewall-cmd --zone=public --remove-port=80/tcp --permanent<br></code></pre></td></tr></table></figure><h2 id="SELinux"><a href="#SELinux" class="headerlink" title="SELinux"></a>SELinux</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#临时关闭</span><br>setenforce 0<br><span class="hljs-comment">##查看状态</span><br><span class="hljs-built_in">cat</span> /etc/selinux/config<br><br><span class="hljs-comment">##setenforce 1 设置SELinux 成为enforcing模式</span><br><span class="hljs-comment">##setenforce 0 设置SELinux 成为permissive模式</span><br><br>vim /etc/sysconfig/selinux<br><br><span class="hljs-comment">##设置参数后保存重启</span><br>selinux=0<br></code></pre></td></tr></table></figure><h2 id="SSH"><a href="#SSH" class="headerlink" title="SSH"></a>SSH</h2><h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs visual">位置:/etc/ssh/<br><br>ssh客户端，sshd服务端<br></code></pre></td></tr></table></figure><p> 配置文件详解:</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs visual">Port 22 端口<br><br>ListenAddress 0.0.0.0 默认监听任何ip<br><br>Protocol 2 SSH版本选择<br><br>HostKey/etc/ssh/ssh_host_rsa_key 私钥保存位置<br><br>ServerKeyBits 1024 私钥的位数<br><br>SyslogFacility AUTH 日志记录SSH登陆情况<br><br>LoaLevel INFO 日志等级<br><br>日志位置:/var/log/secure<br><br>GSSAPIAuthentication yes GSSAPI认证开启<br></code></pre></td></tr></table></figure><h3 id="安全设定部分（解决拒绝远程）"><a href="#安全设定部分（解决拒绝远程）" class="headerlink" title="安全设定部分（解决拒绝远程）"></a>安全设定部分（解决拒绝远程）</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs visual">PermitRootLogin yes 允许root的ssh登录--（通常和第四项一起设置）<br><br>PubkeyAuthentication yes 是否使用公钥验证<br><br>AuthorizedKeysFile .ssh/authorized_keys 公钥保存位置<br><br>PasswordAuthentication yes 允许使用密码验证登录--（通常和第一个一起设置）<br><br>PermitEmptyPasswords no 不允许空密码登录<br></code></pre></td></tr></table></figure><h3 id="Scp远程复制"><a href="#Scp远程复制" class="headerlink" title="Scp远程复制"></a>Scp远程复制</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs visual">下载<br>scp root@192.168.50.128:/root/test.txt .<br><br>从root用户目标主机root目录下载在test文件到本地<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs visual">上传<br>scp -r /root/test.txt/ root@192.168.50.128/root<br><br>把root用户目录下的test上传到root用户目标主机root目录下<br><br>rsync -avz -e &#x27;ssh&#x27; root@192.168.50.128:/root/1.text .<br></code></pre></td></tr></table></figure><h3 id="Sftp文件传输"><a href="#Sftp文件传输" class="headerlink" title="Sftp文件传输"></a>Sftp文件传输</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs visual">sftp root@192.168.4.2<br><br>-ls查看服务器端数据 cd切换服务器端目录 lls查看本地数据<br><br>lcd切换本地目录 get下载 put上传<br></code></pre></td></tr></table></figure><h3 id="SSH-秘钥对验证"><a href="#SSH-秘钥对验证" class="headerlink" title="SSH 秘钥对验证"></a>SSH 秘钥对验证</h3><h4 id="1、第一步创建密钥对"><a href="#1、第一步创建密钥对" class="headerlink" title="1、第一步创建密钥对"></a>1、第一步创建密钥对</h4><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs visual">私钥文件:id_rsa<br><br>公钥文件:id_rsa.pub<br></code></pre></td></tr></table></figure><h4 id="2、第二步上传公钥文件"><a href="#2、第二步上传公钥文件" class="headerlink" title="2、第二步上传公钥文件"></a>2、第二步上传公钥文件</h4><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs visual">id_rsa.pub<br></code></pre></td></tr></table></figure><h4 id="3、第三步导入公钥信息"><a href="#3、第三步导入公钥信息" class="headerlink" title="3、第三步导入公钥信息"></a>3、第三步导入公钥信息</h4><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs visual">公钥库文件:~/.ssh/authorized_keys<br></code></pre></td></tr></table></figure><p>导入到什么用户就以什么用户身份登录</p><p>步骤1</p><p>client端</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs visual">生成钥匙文件:ssh-keygen -t rsa<br></code></pre></td></tr></table></figure><p>server端:</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs visual">把公钥上传到服务器:<br><br>cat id_rsa.pub &gt;&gt; /root/.ssh/authorized_keys<br><br>追加方式&gt;&gt;<br><br>chmod 600 /root/.ssh/authorized_keys<br><br>权限-rw-r-r--644 改为600即rw- （x为执行权限）<br></code></pre></td></tr></table></figure><p>步骤2</p><p>修改服务端ssh配置文件:</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs visual">RSAAuthentication yes 开启RSA验证<br><br>PubkeyAuthentication yes 是否使用公钥验证<br><br>AuthorizedKeysFile .ssh/authorized_keys 公钥保存的位置<br><br>PasswordAuthentication no 禁止使用密码验证登录<br></code></pre></td></tr></table></figure><h2 id="Samba"><a href="#Samba" class="headerlink" title="Samba"></a>Samba</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install samba<br></code></pre></td></tr></table></figure><h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">service smb start<span class="hljs-comment">#smbd提供对服务器中文件、打印资源的共享问139、445端口</span><br><br>service nmb start <span class="hljs-comment">#nmbd提供基于NetBIOS主机名称的解析 137、138端口</span><br><br><br><span class="hljs-comment">##或者</span><br>systemctl start smb<br><br>systemctl start nmb<br></code></pre></td></tr></table></figure><h3 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">##查看网络端口信息</span><br>netstat -tlun<br><br><span class="hljs-comment">##查看查看smb的监听端口是否打开（前者开启139和445的TCP端口）：</span><br>netstat -anlpt |grep smb<br>netstat -anlpt |grep nmb<br><br><br><span class="hljs-comment">##查看smb状态</span><br>systemctl status smb<br><span class="hljs-comment">##查看nmb状态</span><br>systemctl status nmb<br></code></pre></td></tr></table></figure><h3 id="添加到防火墙白名单放行并重载防火墙"><a href="#添加到防火墙白名单放行并重载防火墙" class="headerlink" title="添加到防火墙白名单放行并重载防火墙"></a>添加到防火墙白名单放行并重载防火墙</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">firewall-cmd --permanent --add-service=samba<br>firewall-cmd --reload<br></code></pre></td></tr></table></figure><h3 id="相关文件"><a href="#相关文件" class="headerlink" title="相关文件"></a>相关文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /etc/samba<br><span class="hljs-built_in">ls</span><br><br>smbpasswd <span class="hljs-comment">#密码保存文件，默认不存在</span><br>lmhosts  <span class="hljs-comment">#对应NetBOIS名与主机的P的文件，一般 samba会自动搜索（只对本机生效）</span><br>smb.conf  <span class="hljs-comment">##配置文件</span><br>smb.conf.example <br>smbusers<span class="hljs-comment">## 别名文件名习惯。需要配置文件中“username map” 选项支持</span><br><br><br></code></pre></td></tr></table></figure><h3 id="把root用户加入到Samba服务的用户列表中并给一个密码"><a href="#把root用户加入到Samba服务的用户列表中并给一个密码" class="headerlink" title="把root用户加入到Samba服务的用户列表中并给一个密码"></a>把root用户加入到Samba服务的用户列表中并给一个密码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">smbpasswd -a root<br><br><span class="hljs-comment">##通过命令检查Samba用户是否添加成功：</span><br>pdbedit -L<br></code></pre></td></tr></table></figure><h3 id="配置Samba服务参数文件："><a href="#配置Samba服务参数文件：" class="headerlink" title="配置Samba服务参数文件："></a>配置Samba服务参数文件：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/samba/smb.conf<br></code></pre></td></tr></table></figure><p>添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">[share]<br>      <span class="hljs-comment">#描述信息</span><br>     comment = share <br>     <span class="hljs-comment">#自定义共享路径</span><br>     path = /root/share/share-smb/<br>     <span class="hljs-comment">#public = yes</span><br>     writeable = <span class="hljs-built_in">yes</span><br>     <span class="hljs-comment">#可见</span><br>     browseable = <span class="hljs-built_in">yes</span>  <br>     <span class="hljs-comment">#任何人访问</span><br>     guest ok = <span class="hljs-built_in">yes</span><br></code></pre></td></tr></table></figure><h3 id="重启smb服务："><a href="#重启smb服务：" class="headerlink" title="重启smb服务："></a>重启smb服务：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl restart smb<br></code></pre></td></tr></table></figure><h3 id="客户端连接"><a href="#客户端连接" class="headerlink" title="客户端连接"></a>客户端连接</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash">[root@CentOS8 ~]<span class="hljs-comment"># smbclient //192.168.1.10/share-smb</span><br>Password <span class="hljs-keyword">for</span> [SAMBA\root]:<br>Try <span class="hljs-string">&quot;help&quot;</span> to get a list of possible commands.<br>smb: \&gt; <span class="hljs-built_in">ls</span><br>  .                                   D        0  Fri Dec 16 18:12:37 2022<br>  ..                                  D        0  Fri Dec 16 18:21:50 2022<br>  .DS_Store                          AH     6148  Fri Dec 16 18:22:18 2022<br>  1.text                              N       13  Fri Dec 16 18:08:20 2022<br>  ._.DS_Store                        AH     4096  Fri Dec 16 18:12:37 2022<br><br>51474912 blocks of size 1024. 41724284 blocks available<br>smb: \&gt; <span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure><h2 id="NFS"><a href="#NFS" class="headerlink" title="NFS"></a>NFS</h2><h3 id="服务端"><a href="#服务端" class="headerlink" title="服务端"></a>服务端</h3><h3 id="1、检查系统版本及NFS服务nfs-utils-和rpcbind有没有安装"><a href="#1、检查系统版本及NFS服务nfs-utils-和rpcbind有没有安装" class="headerlink" title="1、检查系统版本及NFS服务nfs-utils 和rpcbind有没有安装"></a>1、检查系统版本及NFS服务nfs-utils 和rpcbind有没有安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rpm -qa nfs-utils rpcbind<br></code></pre></td></tr></table></figure><h3 id="2、如果没有，那就安装NFS服务的nfs-unitls和rpcbind-（因为centos7自带了rpcbind，所以不用安装rpc服务）"><a href="#2、如果没有，那就安装NFS服务的nfs-unitls和rpcbind-（因为centos7自带了rpcbind，所以不用安装rpc服务）" class="headerlink" title="2、如果没有，那就安装NFS服务的nfs-unitls和rpcbind   （因为centos7自带了rpcbind，所以不用安装rpc服务）"></a>2、如果没有，那就安装NFS服务的nfs-unitls和rpcbind   （因为centos7自带了rpcbind，所以不用安装rpc服务）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum -y install nfs-utils　　（只安装nfs-unitls）<br><br>yum install nfs-utils rpcbind -y　　（安装nfs-unitls和rpcbind服务，与上面二选一）<br><br><span class="hljs-comment">#或者</span><br>rpm -ivh nfs-utils rpcbind<br></code></pre></td></tr></table></figure><h4 id="创建共享目录-如mkdir-p-root-share-share-nfs"><a href="#创建共享目录-如mkdir-p-root-share-share-nfs" class="headerlink" title="创建共享目录 如mkdir -p &#x2F;root&#x2F;share&#x2F;share-nfs"></a>创建共享目录 如mkdir -p &#x2F;root&#x2F;share&#x2F;share-nfs</h4><h3 id="配置文件-1"><a href="#配置文件-1" class="headerlink" title="配置文件"></a>配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/exports<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">#插入下面语句，共享目录，读写权限</span><br>/root/share/share-nfs *(rw,<span class="hljs-built_in">sync</span>)<br></code></pre></td></tr></table></figure><h3 id="3、启动rpcbind服务（一定要先启动rpcbind服务再启动nfs服务）"><a href="#3、启动rpcbind服务（一定要先启动rpcbind服务再启动nfs服务）" class="headerlink" title="3、启动rpcbind服务（一定要先启动rpcbind服务再启动nfs服务）"></a>3、启动rpcbind服务（一定要先启动rpcbind服务再启动nfs服务）</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rpcinfo -p 服务的IP或主机名<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl status rpcbind.service<br><span class="hljs-comment">#先查看rbcbind服务状态</span><br><span class="hljs-comment">#启动服务</span><br>systemctl start rpcbind<br>systemctl start nfs<br></code></pre></td></tr></table></figure><h3 id="客户端"><a href="#客户端" class="headerlink" title="客户端"></a>客户端</h3><h4 id="安装nfs相关服务"><a href="#安装nfs相关服务" class="headerlink" title="安装nfs相关服务"></a>安装nfs相关服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install nfs-utils rpcbind -y<br></code></pre></td></tr></table></figure><h4 id="查看服务端哪些共享目录可以链接"><a href="#查看服务端哪些共享目录可以链接" class="headerlink" title="查看服务端哪些共享目录可以链接"></a>查看服务端哪些共享目录可以链接</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">showmount -e 192.168.1.10<br></code></pre></td></tr></table></figure><h4 id="创建客户端目录，并将服务器目录挂载到客户端目录"><a href="#创建客户端目录，并将服务器目录挂载到客户端目录" class="headerlink" title="创建客户端目录，并将服务器目录挂载到客户端目录"></a>创建客户端目录，并将服务器目录挂载到客户端目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p /root/share-nfs<br><br><span class="hljs-comment">#前面路径是服务端共享路径，后面是客户端路径</span><br>mount -t nfs 192.168.1.10:/root/share/share-nfs /root/share-nfs<br></code></pre></td></tr></table></figure><h2 id="TFTP"><a href="#TFTP" class="headerlink" title="TFTP"></a>TFTP</h2><h3 id="服务端-1"><a href="#服务端-1" class="headerlink" title="服务端"></a>服务端</h3><p><a href="https://blog.csdn.net/xoofly/article/details/120729771">https://blog.csdn.net/xoofly/article/details/120729771</a></p><h4 id="1-安装服务器"><a href="#1-安装服务器" class="headerlink" title="1:安装服务器"></a>1:安装服务器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install xinetd tftp tftp-server<br></code></pre></td></tr></table></figure><h4 id="2、修改tftp主配置文件"><a href="#2、修改tftp主配置文件" class="headerlink" title="2、修改tftp主配置文件"></a>2、修改tftp主配置文件</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> /etc/xinetd.d/tftp&#123;,.bak&#125;<br>vi /etc/xinetd.d/tftp<br><br><span class="hljs-comment">#修改以下两行</span><br>server_args        = -s /root/share/share-tftp -c   <span class="hljs-comment"># 注意这行，如果允许上传，一定要加上参数 -c</span><br><span class="hljs-built_in">disable</span>            = no                        <span class="hljs-comment"># 这行默认为yes，改成no，允许</span><br></code></pre></td></tr></table></figure><h4 id="3、创建共享目录并启动tftp服务"><a href="#3、创建共享目录并启动tftp服务" class="headerlink" title="3、创建共享目录并启动tftp服务"></a>3、创建共享目录并启动tftp服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> -p /root/share/share-tftp<br><br> <br>systemctl <span class="hljs-built_in">enable</span> xinetd.service<br></code></pre></td></tr></table></figure><h4 id="4、判断tftp是否启动了"><a href="#4、判断tftp是否启动了" class="headerlink" title="4、判断tftp是否启动了"></a>4、判断tftp是否启动了</h4><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs perl">netstat -ntlup |<span class="hljs-keyword">grep</span> <span class="hljs-number">69</span><br>netstat -a |<span class="hljs-keyword">grep</span> tftp<br></code></pre></td></tr></table></figure><h3 id="客户端测试"><a href="#客户端测试" class="headerlink" title="客户端测试"></a>客户端测试</h3><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs applescript">[root@CentOS8 ~]<span class="hljs-comment"># tftp 192.168.1.10</span><br>tftp&gt; <span class="hljs-keyword">get</span> <span class="hljs-number">1.</span><span class="hljs-built_in">text</span><br>tftp&gt; quit<br></code></pre></td></tr></table></figure><h2 id="DHCP"><a href="#DHCP" class="headerlink" title="DHCP"></a>DHCP</h2><h3 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs visual">dhcp:yum -y install dhcp<br><br>端口号:ipv4 udp67,udp68 ......ipv6 udp546,udp547<br></code></pre></td></tr></table></figure><h3 id="相关文件-1"><a href="#相关文件-1" class="headerlink" title="相关文件"></a>相关文件</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs visual">服务名:dhcpd<br><br>主配置文件:/etc/dhcp/dhcpd.conf<br><br>模板文件:usr/share/doc/dhcp.conf.sample<br><br>模板文件复制到主主配置文件y覆盖<br></code></pre></td></tr></table></figure><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs visual">服务器端配置<br><br>修改配置文件&gt;重启DHCP服务:service dhcpd restart<br><br>客户端配置:<br><br>1 vim /etc/sysconfig/network-scripts/ifcfg-eth0- DEVICEeth0<br><br>\- BOOTPROTO=dhcp （none或者static是手动或者静态）<br><br>\- ONBOOT=yes<br><br>\- TYPE=Ethernet<br><br>重启网络服务<br><br>2 service network restart<br></code></pre></td></tr></table></figure><h3 id="全局配置文件详解"><a href="#全局配置文件详解" class="headerlink" title="全局配置文件详解:"></a>全局配置文件详解:</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs visual">option domain-name 设置所在DNS域;<br><br>option domain-name server 设置DNS服务器地址,有多个用逗号隔开;<br><br>default-lease-time 设置默认租约时间,单位为秒;<br><br>max-lease-time 设置最大租约时间,单位为秒;<br><br>log-facility 指定日志设备;<br><br>ddns-update-style; 设定DNS的更新方式;<br><br>authoritative; 标识权威服务器,主服务器验证;<br><br>log-facility local7; 日志发送到local7日志服务中;<br><br> <br><br>subnet192.168.0.0 netmask255.255.255.0<br><br>分配ip网段 子网掩码<br><br>range192.168.0.50 192.168.0.200<br><br>地址池：50-200<br><br>option routers192.168. 0.1;<br><br>网关<br><br>option broadcast-address 192.168. 0.255;<br><br>广播地址<br></code></pre></td></tr></table></figure><h3 id="租约"><a href="#租约" class="headerlink" title="租约"></a>租约</h3><p>服务器端查看租约:</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs visual">[root@redhat]# vim /var/lib/dhcpd/dhcpd. leases<br><br> <br><br>\# The format of this file is documented in the dhcpd.leases(5) manual page.<br><br>\# This lease file was written by isc-dhcp-4.1.1-Pl<br><br> <br><br>server-duid &quot;(0001001000001032!10138000014)037Gb&quot;;<br><br> <br><br>lease 192.168.1.5 &#123; 获取的ip<br><br>starts 4 2013/11/21 18:19:55; 起始时间<br><br>ends 4 2013/11/21 18:29:55; 终止时间<br><br>cltt 4 2013/11/21 18:19:55; 下发时间<br><br>binding state active; 绑定状态活跃<br><br>next binding state free; 下一个绑定状态自由<br><br>hardware ethernet 00: 0c:29:c4:35:24; MAC地址<br><br>&#125;<br></code></pre></td></tr></table></figure><p>客户端查看租约:</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs visual">[root@redhat]# vim /var/lib/dhclient/dhclient - 5fb06bd0- 0bb0- 7ffb-45f1- d6edd65f3e03-eth0.lease<br><br> <br><br>lease &#123;<br><br>interface &quot;eth0&quot;; 网卡<br><br>fixed-address 192.168.1.5; 获取的ip<br><br>option subnet-mask 255.255.255.0; 掩码<br><br>option routers 192.168.1.2; 网关<br><br>option dhcp- lease-time 600; 时间<br><br>option dhcp-message-type 5; <br><br>option dhcp- server- identifier 192.168.1. 64; 从哪一台获取<br><br>option domain-name &quot;example .org&quot;; <br><br>renew 2 2013/09/24 22:31:25;<br><br>rebind 2 2013/09/24 22:35:25;<br><br>expire 2 2013/09/24 22:36:40;<br><br>&#125;<br></code></pre></td></tr></table></figure><h2 id="VSFTP"><a href="#VSFTP" class="headerlink" title="VSFTP"></a>VSFTP</h2><p>默认主动模式，端口21用于收发命令与监听，端口20用于传输</p><p>被动模式，端口21用于监听，传输使用随机指定端口</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs visual">常见的FTP服务器程序<br><br>IIS.Serv-U<br><br>wu-ftpd. Proftpd<br><br>vsftpd ( Very Secure FTP Daemon )<br></code></pre></td></tr></table></figure><h3 id="安装-2"><a href="#安装-2" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs visual">rpm -ivh /mnt/cdrom/Packages/vsftp<br></code></pre></td></tr></table></figure><h3 id="相关文件-2"><a href="#相关文件-2" class="headerlink" title="相关文件"></a>相关文件</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs visual">主配置文件<br><br>/etc/vsftpd/vsftpd.conf<br><br>用户控制列表文件<br><br>/etc/vsftpd/ftpusers 禁止登录<br><br>/etc/vsftpd/user_ list 白名单<br></code></pre></td></tr></table></figure><h3 id="FTP相关用户"><a href="#FTP相关用户" class="headerlink" title="FTP相关用户"></a>FTP相关用户</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs visual">匿名用户<br><br>anonymous或ftp<br><br>本地用户<br><br>使用Linux系统用户和密码<br><br>虚拟用户<br><br>管理员自定义的模拟用户<br></code></pre></td></tr></table></figure><p>。。需要关闭防火墙与SElinux</p><h3 id="配置文件详解"><a href="#配置文件详解" class="headerlink" title="配置文件详解"></a>配置文件详解</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs visual">/etc/vsftpd/vsftpd.conf<br><br>默认配置文件<br><br>anonymous_enable=YES 允许匿名用户登录<br><br>local_enables=YES 允许本地用户登录<br><br>write_enable=YES 允许上传<br><br>local_umask=022 默认权限只读r———<br><br>dirmessage_enable=YES 用户进入目录时，显示.message文件中信息<br><br>anon upload enable=Yes匿名用户可上传<br>anon mkdir write enable=Yes匿名用户可写<br>anon other write enable=Yes匿名用户可删除<br><br>message_ file=.message 指定信息文件<br><br>xferlog_enable =YES 激活记录日志<br><br>connect_from_port_20=YES 主动模式数据传输接口<br><br>xferlog_std_format=YES 使用标准的fp日志格式<br><br>ftpd_ banner 登陆欢迎信息<br><br>listen=YES 允许被监听<br><br>pam_service_ name- =vsftpd 设置PAM外挂模块提供的认证服务所使用的配置文件名，即/etc/pam.d/vsftpd文件<br><br>userlist_enable=YES 用户登陆限制<br><br>tcp_ wrappers<br></code></pre></td></tr></table></figure><h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><h3 id="安装-3"><a href="#安装-3" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install <span class="hljs-built_in">bind</span><br></code></pre></td></tr></table></figure><h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs visual">文件：/etc/named.conf<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs visual">配置文件<br><br>vim/etc/resolv.conf<br><br>域名解析命令<br><br>nslookup 主机名或者ip<br><br>route -n查看路由列表可以看到网关<br><br><br></code></pre></td></tr></table></figure><p>配置</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs visual">第一步<br><br>打开主配置文件：/etc/named.conf<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs visual">options &#123;<br><br>​    listen-on port 53 &#123; 192.168.80.125; &#125;;    声明监听网卡，多块网卡可以写any<br><br>​    listen-on-v6 port 53 &#123; ::1; &#125;;<br><br>​    directory    &quot;/var/named&quot;;                 服务器的数据目录<br><br>​    dump-file    &quot;/var/named/data/cache_dump.db&quot;;    默认缓存备份文件<br><br>​    statistics-file &quot;/var/named/data/named_stats.txt&quot;;     状态文件<br><br>​    memstatistics-file &quot;/var/named/data/named_mem_stats.txt&quot;;    内存状态备份文件<br><br>​    allow-query   &#123; localhost; &#125;;        访问主机，可以是ip，可以是any<br><br>​    recursion yes;                递归查询<br><br> <br><br>​    dnssec-enable yes;            dns sec加密外壳<br><br>​    dnssec-validation yes;<br><br>​    dnssec-lookaside auto;<br><br> <br><br>​    /* Path to ISC DLV key */<br><br>​    bindkeys-file &quot;/etc/named.iscdlv.key&quot;;<br><br> <br><br>​    managed-keys-directory &quot;/var/named/dynamic&quot;;<br><br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs visual">logging &#123;                    日志区域<br><br>​    channel default_debug &#123;<br><br>​        file &quot;data/named.run&quot;;        日志缓存区域<br><br>​        severity dynamic;            日志级别，dynamic自动匹配级别<br><br>​    &#125;;<br><br>&#125;;<br><br> <br><br>zone &quot;.&quot; IN &#123;<br><br>​    type hint;                根dns<br><br>​    file &quot;named.ca&quot;;            根dns目录<br><br>&#125;;<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs visual">include &quot;/etc/named.rfc1912.zones&quot;;        子配置区域文件<br><br>include &quot;/etc/named.root.key&quot;;            dns密钥验证<br></code></pre></td></tr></table></figure><p>保存退出</p><p>第二步</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><code class="hljs visual">配置区域配置文件：<br><br>带权限的备份：cp -p named.rfc1912.zones named.rfc1912.zones.bak<br><br>打开：vim named.rfc1912.zones<br><br> <br><br>// named.rfc1912.zones:<br><br>//<br><br>// Provided by Red Hat caching-nameserver package<br><br>//<br><br>// ISC BIND named zone configuration for zones recommended by<br><br>// RFC 1912 section 4.1 : localhost TLDs and address zones<br><br>// and http://www.ietf.org/internet-drafts/draft-ietf-dnsop-default-local-zones-02.txt<br><br>// (c)2007 R W Franks<br><br>//<br><br>// See /usr/share/doc/bind*/sample/ for example named configuration files.<br><br>//<br><br> <br><br>zone &quot;localhost.localdomain&quot; IN &#123;<br><br>​    type master;<br><br>​    file &quot;named.localhost&quot;;<br><br>​    allow-update &#123; none; &#125;;<br><br>&#125;;<br><br> <br><br>zone &quot;localhost&quot; IN &#123;                        此区域独立<br><br>​    type master;<br><br>​    file &quot;named.localhost&quot;;<br><br>​    allow-update &#123; none; &#125;;<br><br>&#125;;<br><br> <br><br>zone &quot;1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.ip6.arpa&quot; IN &#123;<br><br>​    type master;<br><br>​    file &quot;named.loopback&quot;;<br><br>​    allow-update &#123; none; &#125;;<br><br>&#125;;<br><br> <br><br>zone &quot;1.0.0.127.in-addr.arpa&quot; IN &#123;<br><br>​    type master;<br><br>​    file &quot;named.loopback&quot;;<br><br>​    allow-update &#123; none; &#125;;<br><br>&#125;;<br><br> <br><br>zone &quot;0.in-addr.arpa&quot; IN &#123;                    此区域独立<br><br>​    type master;<br><br>​    file &quot;named.empty&quot;;<br><br>​    allow-update &#123; none; &#125;;<br><br>&#125;;<br><br> <br><br>修改后示例：<br><br>zone &quot;ac.com&quot; IN &#123;<br><br>​    type master;<br><br>​    file &quot;ac.localhost&quot;;<br><br>​    allow-update &#123; none; &#125;;<br><br>&#125;;<br><br> <br><br>zone &quot;80.168.192.in-addr.arpa&quot; IN &#123;<br><br>​    type master;<br><br>​    file &quot;ac.empty&quot;;<br><br>​    allow-update &#123; none; &#125;;<br><br>&#125;;<br></code></pre></td></tr></table></figure><p>保存退出</p><p>第三步</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs visual">声明配置文件<br><br>打开：cd /var/named/<br><br>带权限的复制配置文件：<br><br>正向：cp -p named.localhost ac.localhost<br><br>反向：cp -p named.empty ac.empty<br></code></pre></td></tr></table></figure><p>打开正向配置文件：</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs visual">$TTL 1D                    存活时间<br><br>@    IN SOA @ rname.invalid. (        第一个@代表域名，IN跳转指针映出后面的内容，SOA引出下面的内容，第二个@写域名完整格式，所有域名要写上英文句号. ，rname.invalid为监控目的，尝试维护与通知管理员<br><br>​                    0    ; serial        更新计数，每次更新加1，如果数值与主服务器不一样则更新<br><br>​                    1D   ; refresh        代表一天检查一次更新<br><br>​                    1H   ; retry        检测失败重试时间间隔，1小时<br><br>​                    1W   ; expire        一周内可以把旧的解析内容给客户端<br><br>​                    3H )  ; minimum    缓存保存最大时间3小时<br><br>​    NS   @                NS声明dns服务器            <br><br>​    A    127.0.0.1                A声明主机名<br><br>​    AAAA  ::1<br><br>~                             <br><br>~                             <br><br>~            <br></code></pre></td></tr></table></figure><p>修改示例：</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs visual">$TTL 1D<br><br>@    IN SOA ac.com. rname.invalid. (        ac.com<br><br>​                    0    ; serial<br><br>​                    1D   ; refresh<br><br>​                    1H   ; retry<br><br>​                    1W   ; expire<br><br>​                    3H )  ; minimum<br><br>​    NS   dns.ac.com.            声明dns<br><br>dns   A    192.168.80.125<br><br>www   A    192.168.80.126<br><br>ftp   CNAME  www<br><br>\*    A    192.168.80.200<br><br>~                 <br></code></pre></td></tr></table></figure><h3 id="反向配置文件示例："><a href="#反向配置文件示例：" class="headerlink" title="反向配置文件示例："></a>反向配置文件示例：</h3><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs visual">$TTL 3H<br><br>@    IN SOA ac.com. rname.invalid. (<br><br>​                    0    ; serial<br><br>​                    1D   ; refresh<br><br>​                    1H   ; retry<br><br>​                    1W   ; expire<br><br>​                    3H )  ; minimum<br><br>​    NS   dns.ac.com.<br><br>125   PTR   dns.ac.com.            125为dns主机ip的主机位<br><br>126   PTR   [www.ac.com](http://www.ac.com).<br></code></pre></td></tr></table></figure><p>保存退出</p><p>重启服务</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">service named <span class="hljs-literal">start</span><br></code></pre></td></tr></table></figure><p>验证服务：</p><p>在客户端添加DNS1</p><figure class="highlight plaintext"><figcaption><span>basic</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs visual">然后使用：nslookup工具测试<br></code></pre></td></tr></table></figure><h2 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h2><h3 id="一、安装Apache服务"><a href="#一、安装Apache服务" class="headerlink" title="一、安装Apache服务"></a>一、安装Apache服务</h3><p><strong>1、检查是否安装了Apache服务器软件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rpm -qa | grep -i httpd<br></code></pre></td></tr></table></figure><p><strong>2、卸载已安装的Apache服务器软件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dnf remove httpd*<br></code></pre></td></tr></table></figure><p>注：如果提示bash: dnf:未找到命令则需要安装dnf命令，分别执行下列两个命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install epel-release<br>yum install dnf<br></code></pre></td></tr></table></figure><p><strong>3、再次检查是否安装了Apache服务器软件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rpm -qa | grep -i httpd<br></code></pre></td></tr></table></figure><p> <strong>4、安装Apache服务器软件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">yum install -y httpd<br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dnf  -y install httpd*<br></code></pre></td></tr></table></figure><p> <strong>5、可以使用rpm -qa | grep -i httpd命令来查询是否安装成功</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">rpm -qa | grep -i httpd<br></code></pre></td></tr></table></figure><p><strong>6、启动httpd服务程序.</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl start httpd<br><br><span class="hljs-comment">##将其加入到开机启动项中，使其能够随系统开机而运行</span><br>systemctl <span class="hljs-built_in">enable</span> httpd<br></code></pre></td></tr></table></figure><p> <strong>7、在浏览器中输入服务器的IP地址，测试服务是否开启</strong></p><h3 id="二、配置Apache服务"><a href="#二、配置Apache服务" class="headerlink" title="二、配置Apache服务"></a>二、配置Apache服务</h3><p><strong>1、Apache服务常见配置文件介绍</strong></p><table><thead><tr><th>文件名称</th><th>作用</th></tr></thead><tbody><tr><td><strong><font color="red">&#x2F;etc&#x2F;httpd</font></strong></td><td><strong><font color="red">服务目录</font></strong></td></tr><tr><td><strong><font color="red">&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf</font></strong></td><td><strong><font color="red">主配置文件</font></strong></td></tr><tr><td><strong><font color="red">&#x2F;var&#x2F;www&#x2F;html</font></strong></td><td><strong><font color="red">网站数据目录</font></strong></td></tr><tr><td><strong><font color="red">&#x2F;var&#x2F;log&#x2F;httpd&#x2F;access_log</font></strong></td><td><strong><font color="red">访问日志</font></strong></td></tr><tr><td><strong><font color="red">&#x2F;var&#x2F;log&#x2F;httpd&#x2F;error_log</font></strong></td><td><strong><font color="red">错误日志</font></strong></td></tr><tr><td><strong>&#x2F;etc&#x2F;httpd&#x2F;conf.d</strong></td><td><strong>附加模块配置文件</strong></td></tr><tr><td><strong>&#x2F;etc&#x2F;httpd&#x2F;modules</strong></td><td><strong>模块文件路径链接</strong></td></tr><tr><td><strong>&#x2F;etc&#x2F;httpd&#x2F;bin&#x2F;</strong></td><td><strong>二进制命令</strong></td></tr><tr><td><strong>&#x2F;etc&#x2F;httpd&#x2F;logs</strong></td><td><strong>默认日志文件位置</strong></td></tr></tbody></table><p><strong>2、Apache主配置文件介绍</strong></p><p>​    <strong>在httpd服务程序的主配置文件中，存在三种类型的信息：注释行信息、全局配置、区域配置。（位置：&#x2F;etc&#x2F;httpd&#x2F;conf&#x2F;httpd.conf）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/httpd/conf/httpd.conf<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">ServerRoot <span class="hljs-string">&quot;/etc/httpd&quot;</span><span class="hljs-comment">##全局配置</span><br><br><br><br>&lt;Directory /&gt;<span class="hljs-comment">##区域配置</span><br>ALLowOverride none <br>Require aLL denied<br>&lt;/ Directory&gt;<br></code></pre></td></tr></table></figure><p> <strong>3、配置http服务程序常用的参数及用途</strong></p><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>ServerRoot</td><td>服务目录</td></tr><tr><td>ServerAdmin</td><td>管理员邮箱</td></tr><tr><td>User</td><td>运行服务的用户</td></tr><tr><td>Group</td><td>运行服务的用户组</td></tr><tr><td>ServerName</td><td>网站服务器的域名</td></tr><tr><td>DocumentRoot</td><td>网站数据目录</td></tr><tr><td>Listen</td><td>监听的IP地址与端口号</td></tr><tr><td>Directorylndex</td><td>默认的索引页面</td></tr><tr><td>ErrorLog</td><td>错误日志文件</td></tr><tr><td>CustomLog</td><td>访问日志文件</td></tr><tr><td>Timeout</td><td>网页超时时间，默认300秒</td></tr></tbody></table><p><strong>4、修改apache网页的默认页，并浏览查看是否成功</strong></p><p> <strong>在httpd配置文件中，可以看出，默认网页的位置存放在&#x2F;var&#x2F;www&#x2F;html目录中，经过查看得知，默认网站的首页名称为index.html，因此可以修改默认主页的内容，替换掉httpd服务程序的默认页面。</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">119 DocumentRoot <span class="hljs-string">&quot;/var/www/html/cugcz&quot;</span><span class="hljs-comment">## &lt;&lt;-- 修改路径</span><br>120 <br>121 <span class="hljs-comment">#</span><br>122 <span class="hljs-comment"># Relax access to content within /var/www.</span><br>123 <span class="hljs-comment">#</span><br>124 &lt;Directory <span class="hljs-string">&quot;/var/www/html/cugcz&quot;</span>&gt;<span class="hljs-comment">## &lt;&lt;-- 修改路径</span><br>125     AllowOverride None<br>126     <span class="hljs-comment"># Allow open access:</span><br>127     Require all granted<br>128 &lt;/Directory&gt;<br>129 <br>130 <span class="hljs-comment"># Further relax access to the default document root:</span><br>131 &lt;Directory <span class="hljs-string">&quot;/var/www/html/cugcz&quot;</span>&gt;<span class="hljs-comment">## &lt;&lt;-- 修改路径</span><br>132     <span class="hljs-comment">#</span><br><br></code></pre></td></tr></table></figure><h3 id="三、自定义网站存放目录"><a href="#三、自定义网站存放目录" class="headerlink" title="三、自定义网站存放目录"></a>三、自定义网站存放目录</h3><p><strong>1、建立存放网站数据的目录</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> /var/www/html/cugcz<br></code></pre></td></tr></table></figure><p><strong>2、创建自定义网页</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> /var/www/html/cugcz<br>vim index.html<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">&lt;!DOCTYPE html&gt;<br>&lt;html lang=<span class="hljs-string">&quot;en&quot;</span>&gt;<br><br>&lt;<span class="hljs-built_in">head</span>&gt;<br>    &lt;meta charset=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;<br>    &lt;meta http-equiv=<span class="hljs-string">&quot;X-UA-Compatible&quot;</span> content=<span class="hljs-string">&quot;IE=edge&quot;</span>&gt;<br>    &lt;meta name=<span class="hljs-string">&quot;viewport&quot;</span> content=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;<br>    &lt;<span class="hljs-built_in">link</span> rel=<span class="hljs-string">&quot;stylesheet&quot;</span> href=<span class="hljs-string">&quot;index.css&quot;</span>&gt;<br>    &lt;title&gt;please visit my homepage&lt;/title&gt;<br>&lt;/head&gt;<br><br>&lt;body&gt;<br>    &lt;h1&gt; hello,world！ &lt;/h1&gt;<br>&lt;/body&gt;<br><br>&lt;/html&gt;<br></code></pre></td></tr></table></figure><p>保存退出</p><p><strong>3、打开httpd服务程序的主配置文件，修改网站数据保存路径的参数，将119行的DocumentRoot修改，将定义目录权限的参数124行和131行的Directory的路径也修改</strong></p><p>​打开主配置文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/httpd/conf/httpd.conf<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs bash">DocumentRoot <span class="hljs-string">&quot;/var/www/html/cugcz&quot;</span><br>120 <br>121 <span class="hljs-comment">#</span><br>122 <span class="hljs-comment"># Relax access to content within /var/www.</span><br>123 <span class="hljs-comment">#</span><br>124 &lt;Directory <span class="hljs-string">&quot;/var/www/html/cugcz&quot;</span>&gt;<br>125     AllowOverride None<br>126     <span class="hljs-comment"># Allow open access:</span><br>127     Require all granted<br>128 &lt;/Directory&gt;<br>129 <br>130 <span class="hljs-comment"># Further relax access to the default document root:</span><br>131 &lt;Directory <span class="hljs-string">&quot;/var/www/html/cugcz&quot;</span>&gt;<br>132 <br><br><br></code></pre></td></tr></table></figure><p> <strong>4.、重新启动httpd服务</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl restart httpd<br></code></pre></td></tr></table></figure><h3 id="四、配置Selinux安全子系统或者直接关闭防火墙："><a href="#四、配置Selinux安全子系统或者直接关闭防火墙：" class="headerlink" title="四、配置Selinux安全子系统或者直接关闭防火墙："></a>四、配置Selinux安全子系统或者直接关闭防火墙：</h3><h3 id="防火墙开放端口-1"><a href="#防火墙开放端口-1" class="headerlink" title="防火墙开放端口"></a>防火墙开放端口</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs bash">firewall-cmd --zone=public --add-port=80/tcp --permanent <br><span class="hljs-comment">#(--permanent 这个参数是永久生效，如果不设置这个参数，默认重启后就失效)</span><br><br><span class="hljs-comment">#重新载入，使设置剩下</span><br><br>firewall-cmd --reload<br><br><span class="hljs-comment">#查看</span><br><br>firewall-cmd --zone=public --query-port=80/tcp<br><br><span class="hljs-comment">#删除</span><br><br>firewall-cmd --zone=public --remove-port=80/tcp --permanent<br></code></pre></td></tr></table></figure><p><strong>1、查看linux系统Selinux的运行状态</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">vim /etc/selinux/config<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># This file controls the state of SELinux on the system.</span><br><span class="hljs-comment"># SELINUX= can take one of these three values:</span><br><span class="hljs-comment">#     enforcing - SELinux security policy is enforced.</span><br><span class="hljs-comment">#     permissive - SELinux prints warnings instead of enforcing.</span><br><span class="hljs-comment">#     disabled - No SELinux policy is loaded.</span><br>SELINUX=enforcing<br><span class="hljs-comment"># SELINUXTYPE= can take one of three values:</span><br><span class="hljs-comment">#     targeted - Targeted processes are protected,</span><br><span class="hljs-comment">#     minimum - Modification of targeted policy. Only selected processes are protected. </span><br><span class="hljs-comment">#     mls - Multi Level Security protection.</span><br>SELINUXTYPE=targeted<br><br></code></pre></td></tr></table></figure><p> <strong>通过以上面内容可以看到，Selinux安全子系统是处理强制运行状态</strong></p><p><strong>2、把Selinux服务的运行模式修改为强制启用状态</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">setenforce 1<br></code></pre></td></tr></table></figure><p><strong>3、设置自定义网站目录Selinux安全上下文</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">semanage fcontext -a -t httpd_sys_content_t /var/www/html/cugcz<br>semanage fcontext -a -t httpd_sys_content_t /var/www/html/cugcz/*<br></code></pre></td></tr></table></figure><p><strong>4、 刷新Selinux安全上下文</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">restorecon -Rv /var/www/html/cugcz/<br></code></pre></td></tr></table></figure><p><strong>5、通过IP地址访问</strong></p><h2 id="python"><a href="#python" class="headerlink" title="python"></a>python</h2><h3 id="套接字模拟ping"><a href="#套接字模拟ping" class="headerlink" title="套接字模拟ping"></a>套接字模拟ping</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"> <span class="hljs-comment"># -*-coding:UTF-8 -*-</span><br> <span class="hljs-comment"># &quot;pingServer.py&quot;</span><br><br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">from</span> socket <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> time<br><br>serverSocket = socket(AF_INET,SOCK_DGRAM) <span class="hljs-comment"># 创建套接字</span><br>serverSocket.bind((<span class="hljs-string">&#x27;&#x27;</span>,<span class="hljs-number">12000</span>))             <span class="hljs-comment">#将套接字与端口绑定</span><br><br><br><span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        rand = random.randint(<span class="hljs-number">0</span>,<span class="hljs-number">10</span>) <span class="hljs-comment"># 生成随机数</span><br>        time.sleep(rand/<span class="hljs-number">10</span>)         <span class="hljs-comment"># 随机延迟,模拟不同网络环境</span><br>        message,address = serverSocket.recvfrom(<span class="hljs-number">1024</span>) <span class="hljs-comment"># 接收信息</span><br>        message = message.decode().lower()<br> <span class="hljs-comment"># to simulate the round-trip time timeout interval</span><br>        <span class="hljs-keyword">if</span> rand &lt; <span class="hljs-number">2</span>:<br>                <span class="hljs-keyword">continue</span><br>        serverSocket.sendto(message.encode(<span class="hljs-string">&quot;utf-8&quot;</span>),address) <span class="hljs-comment"># 发送信息   </span><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">#filename:pingClient.py </span><br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">import</span> sys<br><span class="hljs-keyword">from</span> socket <span class="hljs-keyword">import</span> *<br><br><span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(sys.argv)&lt; <span class="hljs-number">2</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;missing a parameter for target hostname&quot;</span>)<br>    exit()<br><br><span class="hljs-comment">#ServerName=&#x27;192.168.1.10&#x27;</span><br>ServerName = sys.argv[<span class="hljs-number">1</span>]<br>serverPort = <span class="hljs-number">12000</span> <span class="hljs-comment"># 端口号</span><br>clientSocket = socket(AF_INET,SOCK_DGRAM) <span class="hljs-comment"># 创建套接字</span><br><br>timeout_interval = <span class="hljs-number">2</span> <span class="hljs-comment">#设置超时时间为 2s</span><br>clientSocket.settimeout(timeout_interval) <span class="hljs-comment"># 设置超时时间</span><br>rtt_min = timeout_interval <span class="hljs-comment"># set to timeout interval</span><br>rtt_max = <span class="hljs-number">0</span><br>rtt_list = []<br>number=<span class="hljs-number">4</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>,number):<br>    send_time = time.time()<br><span class="hljs-comment">#sendTime = time.strftime(&#x27;%Y-%m-%d %H:%M:%S&#x27;, time.localtime(send_time))</span><br>    sendTime = time.strftime(<span class="hljs-string">&#x27;%H:%M:%S&#x27;</span>, time.localtime(send_time)) <span class="hljs-comment">#发送时间</span><br>    message = (<span class="hljs-string">&#x27;packet %d, time:%s&#x27;</span>%(i+<span class="hljs-number">1</span>,sendTime)).encode() <span class="hljs-comment">#包含序号和发送时间</span><br>    <span class="hljs-keyword">try</span>:<br>        clientSocket.sendto(message, (ServerName,serverPort)) <span class="hljs-comment">#发送数据</span><br>        modifiedMessage,serverAddress = clientSocket.recvfrom(<span class="hljs-number">1024</span>) <span class="hljs-comment">#接收数据</span><br>        rtt = time.time() - send_time <span class="hljs-comment">#计算往返时间</span><br>        rtt_list.append(rtt)<br>        <span class="hljs-keyword">if</span> rtt &gt; rtt_max:<br>            rtt_max=rtt<br>        <span class="hljs-keyword">if</span> rtt &lt; rtt_min:<br>            rtt_min = rtt<br>        <span class="hljs-comment"># 输出往返时间</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;报文%d 收到来自%s 的应答:%s, rtt=%fs&#x27;</span>%(i+<span class="hljs-number">1</span>, ServerName,\<br>modifiedMessage.decode(), rtt))<br>    <span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;报文%d:请求超时&#x27;</span>%(i+<span class="hljs-number">1</span>)) <span class="hljs-comment"># 处理异常</span><br><br><br>aver=<span class="hljs-number">0.0</span><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(rtt_list)):<br>        aver += rtt_list[i]<br>aver /= <span class="hljs-built_in">len</span>(rtt_list) <span class="hljs-comment"># 平均往返时延</span><br><br>mdev=<span class="hljs-number">0.0</span><br><span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(rtt_list)):<br>          mdev += (rtt_list[j] -aver)**<span class="hljs-number">2</span><br>mdev=<span class="hljs-built_in">pow</span>(mdev/<span class="hljs-built_in">len</span>(rtt_list),<span class="hljs-number">0.5</span>) <span class="hljs-comment"># mean deviation</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;rtt min/max:&quot;</span>,rtt_min, rtt_max)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;The difference between maximum and minimum:&quot;</span>, rtt_max - rtt_min)<br><br></code></pre></td></tr></table></figure><h5 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">[ac@localhost ~]$ python3 pingClient.py 192.168.1.10<br>报文1 收到来自192.168.1.10 的应答:packet 1, time:18:20:39, rtt=0.001008s<br>报文2 收到来自192.168.1.10 的应答:packet 2, time:18:20:39, rtt=0.701134s<br>报文3:请求超时<br>报文4 收到来自192.168.1.10 的应答:packet 4, time:18:20:42, rtt=0.000459s<br>rtt min/max: 0.00045943260192871094 0.701134443283081<br>The difference between maximum and minimum: 0.7006750106811523<br></code></pre></td></tr></table></figure><h2 id="多进程端口扫描器"><a href="#多进程端口扫描器" class="headerlink" title="多进程端口扫描器"></a>多进程端口扫描器</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># server filename:dnsAddrOffer.py</span><br><span class="hljs-keyword">from</span> socket <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> *<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">servAddrOffer</span>():<br>        sock = socket(AF_INET, SOCK_DGRAM)<br>        sock.setsockopt(SOL_SOCKET, SO_BROADCAST, <span class="hljs-literal">True</span>)<br>        <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>                IP = gethostbyname(gethostname())<br>                IP = IP[:IP.rindex(<span class="hljs-string">&#x27;.&#x27;</span>)] + <span class="hljs-string">&#x27;.255&#x27;</span><br>                sock.sendto(<span class="hljs-string">&#x27;dns broadcast&#x27;</span>.encode(<span class="hljs-string">&#x27;utf-8&#x27;</span>), (IP,<span class="hljs-number">5050</span>))<br>                sleep(<span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;DNS Server ip address broadcast started ...&quot;</span>)<br>        servAddrOffer()<br><span class="hljs-comment">#上述程序中第 7 行“sock.setsockopt(SOL_SOCKET, SO_BROADCAST, True)” 设置套接字能向广播地址发送数据。</span><br><br></code></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># client filename:dnsAddrDiscovery.py</span><br><span class="hljs-keyword">from</span> socket <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> time<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">addrDiscovery</span>():<br>    sock = socket(AF_INET,SOCK_DGRAM)<br>    sock.bind((<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-number">5050</span>))<br>    data,addr = sock.recvfrom(<span class="hljs-number">1024</span>)<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        <span class="hljs-keyword">if</span> data.decode()== <span class="hljs-string">&quot;dns broadcast&quot;</span>:<br>            <span class="hljs-keyword">break</span><br>        data, addr = sock.recvfrom(<span class="hljs-number">1024</span>)<br>        <span class="hljs-comment">#time.sleep(5)</span><br>        <br>    substr = <span class="hljs-string">&quot;nameserver &#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(addr[<span class="hljs-number">0</span>])<br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;/etc/resolv.conf&#x27;</span>, <span class="hljs-string">&#x27;a+&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>        f.write(substr + <span class="hljs-string">&#x27;\n&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;dns entry &quot;&#123;&#125;&quot; has been appended&#x27;</span>.<span class="hljs-built_in">format</span>(substr))<br>    <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;Server address broadcast started ...&quot;</span>)<br>    addrDiscovery()               <br></code></pre></td></tr></table></figure><h4 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h4>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
